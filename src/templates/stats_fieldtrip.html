<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì—°ê°„ êµì™¸ì²´í—˜í•™ìŠµ í†µê³„ (êµ­ë‚´/êµ­ì™¸)</title>
    <style>
        body { font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; padding: 20px; background: #f4f4f9; }
        h2 { text-align: center; color: #333; margin-bottom: 5px; }
        .subtitle { text-align: center; color: #666; font-size: 0.9em; margin-bottom: 30px; }
        
        .card { background: #fff; padding: 20px; margin-bottom: 15px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); border-left: 5px solid #ccc; }
        /* ìƒíƒœë³„ ì¹´ë“œ ìƒ‰ìƒ */
        .card.has-data { border-left-color: #28a745; }
        .card.warning { border-left-color: #fd7e14; }
        .card.violation { border-left-color: #dc3545; }
        
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .name-tag { font-size: 1.3em; font-weight: bold; }
        
        .section-title { font-size: 0.9em; font-weight: bold; color: #555; margin-bottom: 5px; margin-top: 10px; }
        
        /* í”„ë¡œê·¸ë˜ìŠ¤ ë°” ìŠ¤íƒ€ì¼ */
        .progress-group { margin-bottom: 15px; }
        .progress-container { width: 100%; background-color: #e9ecef; border-radius: 8px; height: 18px; position: relative; }
        .progress-bar { height: 100%; border-radius: 8px; text-align: center; color: white; font-size: 0.75em; line-height: 18px; transition: width 0.5s; }
        .limit-line { position: absolute; top: 0; bottom: 0; width: 2px; background: #333; z-index: 5; opacity: 0.3; }
        
        /* ë±ƒì§€ ìŠ¤íƒ€ì¼ */
        .badge { padding: 2px 6px; border-radius: 4px; font-size: 0.75em; color: white; margin-left: 5px; vertical-align: middle; }
        .bg-red { background: #dc3545; } 
        .bg-orange { background: #fd7e14; }
        
        .details { font-size: 0.85em; color: #666; padding-left: 10px; border-left: 2px solid #eee; margin-top: 5px; }
        .no-data { text-align: center; color: #aaa; margin-top: 50px; }
    </style>
</head>
<body>
    <h2>ğŸšŒ ì—°ê°„ êµì™¸ì²´í—˜í•™ìŠµ ìƒì„¸ í†µê³„</h2>
    <div class="subtitle">êµ­ë‚´ {{ limits.dom_total }}ì¼ (ì—°ì† {{ limits.dom_cons }}ì¼) / êµ­ì™¸ {{ limits.intl_total }}ì¼ ë³„ë„ ê´€ë¦¬</div>
    
    <div style="max-width: 900px; margin: 0 auto;">
        {% if not students %}
            <div class='no-data'>ì²´í—˜í•™ìŠµ ì‚¬ìš© ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</div>
        {% else %}
            {% for s in students %}
            <div class="card {{ s.card_class }}">
                <div class="header">
                    <span class="name-tag">{{ s.num }}ë²ˆ {{ s.name }}</span>
                    <div>
                        {% if s.badges %}
                            {% for b in s.badges %}
                            <span class='badge {{ b.color_class }}'>{{ b.text }}</span>
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>

                <div class="progress-group">
                    <div class="section-title">ğŸ‡°ğŸ‡· êµ­ë‚´ í˜„í™© ({{ s.dom.total }} / {{ limits.dom_total }}ì¼)</div>
                    <div class="progress-container">
                        <div class="progress-bar" style="width: {{ s.dom.pct }}%; background-color: {{ s.dom.color }};">
                            {{ s.dom.total }}ì¼
                        </div>
                        <div class="limit-line" style="left: 100%;" title="í•œë„"></div>
                    </div>
                    <div class="details">
                        {{ s.dom.details|safe if s.dom.details else 'ì‚¬ìš© ë‚´ì—­ ì—†ìŒ' }}
                    </div>
                </div>

                {% if s.intl.total > 0 %}
                <div class="progress-group">
                    <div class="section-title">âœˆï¸ êµ­ì™¸ í˜„í™© ({{ s.intl.total }} / {{ limits.intl_total }}ì¼)</div>
                    <div class="progress-container">
                        <div class="progress-bar" style="width: {{ s.intl.pct }}%; background-color: {{ s.intl.color }};">
                            {{ s.intl.total }}ì¼
                        </div>
                        <div class="limit-line" style="left: 100%;" title="í•œë„"></div>
                    </div>
                    <div class="details">{{ s.intl.details|safe }}</div>
                </div>
                {% endif %}
            </div>
            {% endfor %}
        {% endif %}
    </div>
</body>
</html>