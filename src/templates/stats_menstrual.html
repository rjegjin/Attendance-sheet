<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ìƒë¦¬ì¸ì •ê²°ì„ ì›”ë³„ í˜„í™©</title>
    <style>
        body { font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; padding: 20px; }
        h2 { text-align: center; margin-bottom: 20px; }
        .legend { text-align: right; font-size: 0.9em; margin-bottom: 10px; color: #666; }
        
        table { width: 100%; border-collapse: collapse; table-layout: fixed; font-size: 0.9em; }
        th, td { border: 1px solid #ccc; padding: 6px 4px; text-align: center; vertical-align: middle; position: relative; }
        th { background-color: #f8f9fa; height: 35px; font-weight: bold; }
        
        /* ìƒíƒœë³„ ìŠ¤íƒ€ì¼ */
        .violation { background-color: #ffcccc; color: #d00; font-weight: bold; } 
        .used-abs { background-color: #e3f2fd; color: #0056b3; } 
        .used-sub { background-color: #fff3cd; color: #856404; } 
        
        /* íˆ´íŒ (Tooltip) ìŠ¤íƒ€ì¼ */
        [data-tooltip]:hover::after {
            content: attr(data-tooltip);
            position: absolute; bottom: 80%; left: 50%; transform: translateX(-50%);
            background: #333; color: #fff; padding: 5px; border-radius: 4px;
            font-size: 0.85em; white-space: pre; z-index: 100; min-width: 80px;
        }
        [data-tooltip]:hover::before {
            content: ''; position: absolute; top: -5px; left: 50%; margin-left: -5px;
            border-width: 5px; border-style: solid; border-color: #333 transparent transparent;
        }
    </style>
</head>
<body>
    
    <h2>ğŸ©¸ ìƒë¦¬ì¸ì •ê²°ì„ ì›”ë³„ ì‚¬ìš© í˜„í™©</h2>
    
    <div class="legend">
        <span style="background:#ffcccc; padding:2px 5px;">â–  ìœ„ë°˜</span>
        <span style="background:#e3f2fd; padding:2px 5px;">â–  ê²°ì„(1ì¼)</span>
        <span style="background:#fff3cd; padding:2px 5px;">â–  ê¸°íƒ€(ì§€/ì¡°/ê²°)</span>
    </div>
    
    <table>
        <thead>
            <tr>
                <th width="50">ë²ˆí˜¸</th>
                <th width="70">ì„±ëª…</th>
                {% for m in months %}
                <th>{{ m }}ì›”</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for row in rows %}
            <tr>
                <td>{{ row.num }}</td>
                <td>{{ row.name }}</td>
                
                {% for cell in row.cells %}
                <td class="{{ cell.class }}" 
                    {% if cell.tooltip %}data-tooltip="{{ cell.tooltip }}"{% endif %}>
                    {{ cell.content|safe }}
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>